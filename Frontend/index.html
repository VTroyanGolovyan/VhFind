<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VHFinder</title>
    <link rel="stylesheet" type="text/css" href="assets/css/main.css">
    <!-- Google fonts (Open Sans) -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
  </head>
  <body>
    <header>
      <div class="logo">
        <a href="#/">
          <img src="assets/img/logo.png" alt="">
        </a>
      </div>
      <nav>
        <a>
          VHdev website
        </a>
        <a href="#/Signin">
          Sign in
        </a>
        <a>
          Sign up
        </a>
      </nav>
    </header>
    <main id="app">

    </main>
    <footer>
      VHdev @ 2021
    </footer>
    <script src="./assets/js/VHrequest.js"></script>
    <script src="./assets/js/VHrouter.js"></script>
    <script src="./assets/js/VHModule.js"></script>
    <script src="./assets/js/VHMagicFramework.js"></script>
    <script>

      const SERVER = 'http://127.0.0.1:5000/'

      let finderModule = new Module({
        template: './templates/find_page.html',
        model: {
          queryString: 'query'
        }
      })

      let signinModule = new Module({
        template: './templates/sign_in.html',
        model: {
          login: 'fiifi',
          password: 'fiifi'
        },
        handlers: {
          loginButton: function(model) {
            alert(model.login + ' ' + model.password)
            VHrequest({
              method: 'POST',
              url: SERVER + '/sign/in',
              data: {
                login: model.login,
                password: model.password
              }
            }).then((response) => {
              alert(response)
            })
          }
        }
      })

      let routes = [
        ['/', finderModule],
        ['/Find', finderModule],
        ['/Signin', signinModule]
      ]

      let router = new Router(routes)

      VHmagic.initApp('app', router)

    </script>
  </body>
</html>
